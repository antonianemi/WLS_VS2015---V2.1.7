/*------------------------------------------------------------------------------*
 * semaphore.c	 													*
 * 		       	     FABRICANTES DE BÁSCULAS TORREY					*
 * 						SERVIDOR ETHERNET							*
 *------------------------------------------------------------------------------*
 *																*
 *												Gregory Garcia		*
 * 														      	*
 *-----------------------------------------------------------------------------*/

#include "extern.h"

/*------------------------------------------------------------------------------*
Star Code
-------------------------------------------------------------------------------*/

/*------------------------------------------------------------------------------*
SemaphoreOn
-------------------------------------------------------------------------------*/
void SemaphoreOn(long *semaphore)										//on semaphore
{
int sw = 0;
	while(*semaphore>0)
	{
		if(sw==0)printf("*** Waiting for semaphore off...\n");				//printf message
		sw = 1;													//siwtch status
		Sleep(100);												//wait		
		*semaphore -= 1;											//decrement semaphore
	}
	*semaphore = SEMAPHORE_TIMEOUT;									//set semaphore timeout
}

/*------------------------------------------------------------------------------*
SemaphoreOff
-------------------------------------------------------------------------------*/
void SemaphoreOff(long *semaphore)										//off semaphore
{
	*semaphore = 0;												//off semaphore
}

/*------------------------------------------------------------------------------*
End Code
-------------------------------------------------------------------------------*/